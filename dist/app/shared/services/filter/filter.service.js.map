{"version":3,"sources":["../src/app/shared/services/filter/filter.service.ts"],"names":[],"mappings":"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","file":"filter.service.js","sourcesContent":["import { Injectable } from '@angular/core';\n\n/**\n * Service which is used for filtering array of objects\n */\n@Injectable()\nexport class FilterService {\n\n    constructor() { }\n\n    /**\n     * function which filters an array by comparing each element with filter object\n     * \n     * @param array array of objects\n     * @param filter object which is used as a filter criteria\n     */\n    filterBy(array: any[], filter: any): any {\n        console.log(\"filter\");\n        const type = typeof filter;\n\n        if (!array) {\n            return array;\n        }\n\n        if (type === 'boolean') {\n            return array.filter(this.filterByBoolean(filter));\n        }\n\n        if (type === 'string') {\n            if (this.isNumber(filter)) {\n                return array.filter(this.filterDefault(filter));\n            }\n\n            return array.filter(this.filterByString(filter));\n        }\n\n        if (type === 'object') { console.log('filter obj');\n            return array.filter(this.filterByObject(filter));\n        }\n\n        if (type === 'function') {\n            return array.filter(filter);\n        }\n\n        return array.filter(this.filterDefault(filter));\n    }\n\n    private filterByString(filter : any) {\n        console.log(\"filter string\");\n        if (filter) {\n            filter = filter.toLowerCase();\n        }\n\n        return (value: any) => {\n            return !filter || (value ? value.toLowerCase().indexOf(filter) !== -1 : false);\n        }\n    }\n\n    private filterByBoolean(filter : any) {\n        return (value: any) => {\n            return Boolean(value) === filter;\n        }\n    }\n\n    private filterByObject(filter: any) {\n\n        return (value: any) => {\n\n            for (let key in filter) {\n\n                const type = typeof filter[key];\nconsole.log(\"filfilter[key]: \" + JSON.stringify(filter[key]));\n                if(filter[key]) {\n\n                    if (type === 'string' && filter[key] === '') {\n                        console.log('filter 1');\n                        return true\n                    }\n    \n                    if (value) {\n\n                        if (!value.hasOwnProperty(key) && !Object.getOwnPropertyDescriptor(Object.getPrototypeOf(value), key)) {\n                            return false;\n                        }\n\n                        let val = this.getValue(value[key]);\n                        let isMatching: any;\n\n                        if (type === 'boolean') {\n                            isMatching = this.filterByBoolean(filter[key])(val);\n                        } else if (type === 'string') {\n                            isMatching = this.filterByString(filter[key])(val);\n                        } else if (type === 'object') {\n                            isMatching = this.filterByObject(filter[key])(val);\n                        } else {\n                            isMatching = this.filterDefault(filter[key])(val);\n                        }\n\n                        if (!isMatching) {\n                            console.log('filter 2');\n                            return false;\n                        }\n\n                    } else {\n                        console.log('filter 3');\n                        return false;\n                    }\n                }\n\n            }\nconsole.log('filter 4');\n            return true;\n        }\n    }\n\n    private getValue(value: any) {\n        return typeof value === 'function' ? value() : value;\n    }\n\n    private filterDefault(filter: any) {\n        return (value: any) => {\n            return !filter || filter == value;\n        }\n    }\n\n    private isNumber(value: any) {\n        return !isNaN(parseInt(value, 10)) && isFinite(value);\n    }\n}"]}