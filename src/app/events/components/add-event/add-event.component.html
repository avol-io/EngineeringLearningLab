<div class="container" [hidden]="submitted">
    <h2>Inserisci evento</h2>
    <h3><i>Inserisci un nuovo evento</i></h3>
    <form [formGroup]="myForm" novalidate>
        <div class="form-group">
            <label class="center-block">Tipo:
                <select class="form-control" formControlName="type">
                    <option *ngFor="let t of eventTypes" [value]="t">{{t}}</option>
                </select>
            </label>
        </div>
        <div class="form-group">
            <label class="center-block">Titolo:
                <input class="form-control" formControlName="title" data-error="Bruh, that email address is invalid">
            </label>
            <div *ngIf="myForm.controls.title.dirty && myForm.controls.title.hasError('required')" class="input-error-message">Campo obbligatorio</div>
        </div>
        <div class="form-group">
            <label class="center-block">Descrizione:
                <textarea rows="3" class="form-control" formControlName="description"></textarea>
            </label>
            <div *ngIf="myForm.controls.description.dirty && myForm.controls.description.hasError('required')" class="input-error-message">Campo obbligatorio</div>
        </div>
        <div class="form-group">
            <label class="center-block">Note:
                <textarea rows="2" class="form-control" formControlName="annotation"></textarea>
            </label>
        </div>

        <subform-speaker [parentForm]="myForm"></subform-speaker>

        <div class="form-group">
            <button type="button" class="btn btn-warning" (click)="myForm.reset()">Reset</button>
            <button type="button" class="btn btn-success" (click)="addEvent()" [disabled]="myForm.pending || myForm.invalid">Invia</button>
        </div>
    </form>
    <p>Form value: {{ myForm.value | json }}</p>
    <p>Form status: {{ myForm.status | json }}</p>
    <p>Form pristine: {{ myForm.pristine | json }}</p>
    <p>Form touched: {{ myForm.touched | json }}</p>
</div>


<div class="container" [hidden]="!submitted">
    <h2>Hai inserito un nuovo evento:</h2>
    <table class="table table-striped">
        <tbody>
        <tr *ngIf="myForm.controls.type.value !== ''">
            <th>Tipo</th>
            <td>{{myForm.get('type').value}}</td>
        </tr>
        <tr>
            <th>Titolo</th>
            <td>{{myForm.get('title').value}}</td>
        </tr>
        <tr>
            <th>Descrizione</th>
            <td>{{myForm.get('description').value}}</td>
        </tr>
        <tr *ngIf="myForm.controls.annotation.value !== ''">
            <th>Note</th>
            <td>{{myForm.get('annotation').value}}</td>
        </tr>

        <tr *ngIf="myForm.controls.speaker.dirty">
            <th>Speaker</th>
            <td>{{myForm.get('speaker.name').value + ' ' + myForm.get('speaker.surname').value}}</td>
        </tr>
        <tr *ngIf="myForm.controls.speaker.controls.address.dirty">
            <th>Domicilio speaker</th>
            <td>{{myForm.get('speaker.address.street').value + ', ' + myForm.get('speaker.address.postalCode').value + ', ' + myForm.get('speaker.address.city').value}}</td>
        </tr>
        </tbody>
    </table>
    <button class="btn btn-primary" (click)="submitted=false">Indietro</button>
</div>